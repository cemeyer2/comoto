(function(a){function b(c,e){this.jqObj=c;switch(e.speed){case"fast":this.steps=5;break;case"normal":this.steps=10;break;case"slow":this.steps=20;break;default:this.steps=10}var d=this.jqObj.offset();this.currentX=d.left;this.currentY=d.top;this.width=this.jqObj.width();this.height=this.jqObj.height();this.alwaysVisible=e.alwaysVisible;this.alwaysTop=e.alwaysTop;this.origX=e.x();this.origY=e.y();this.xFunc=e.x;this.yFunc=e.y;this.jqObj.css({position:"absolute",top:this.currentY,left:this.currentX})}b.prototype.updateLocation=function(){this.origX=this.xFunc();this.origY=this.yFunc();this.updatedX=a(window).scrollLeft()+this.origX;if(this.alwaysTop==false){this.updatedY=a(window).scrollTop()+this.origY;if(this.alwaysVisible){if(this.origX+this.width>this.windowWidth()){this.updatedX=this.windowWidth()-this.width+a(window).scrollLeft()}if(this.origY+this.height>this.windowHeight()){this.updatedY=a(window).scrollTop()+this.windowHeight()-this.height;if(this.updatedY<this.origY){this.updatedY=this.origY}}}}else{if(a(window).scrollTop()>this.origY){this.updatedY=a(window).scrollTop()+5}else{this.updatedY=this.origY+5}}this.dx=Math.abs(this.updatedX-this.currentX);this.dy=Math.abs(this.updatedY-this.currentY);return this.dx||this.dy};b.prototype.windowHeight=function(){var c=document.documentElement;return self.innerHeight||(c&&c.clientHeight)||document.body.clientHeight};b.prototype.windowWidth=function(){var c=document.documentElement;return self.innerWidth||(c&&c.clientWidth)||document.body.clientWidth};b.prototype.move=function(){if(this.jqObj.css("position")!="absolute"){return}var c=0;var d=0;if(this.dx>0){if(this.dx<this.steps/2){c=(this.dx>=1)?1:0}else{c=Math.round(this.dx/this.steps)}if(this.currentX<this.updatedX){this.currentX+=c}else{this.currentX-=c}}if(this.dy>0){if(this.dy<this.steps/2){d=(this.dy>=1)?1:0}else{d=Math.round(this.dy/this.steps)}if(this.currentY<this.updatedY){this.currentY+=d}else{this.currentY-=d}}this.jqObj.css({left:this.currentX,top:this.currentY})};a.floatMgr={FOArray:new Array(),timer:null,initializeFO:function(c,f){var d=a.extend({x:0,y:0,speed:"normal",alwaysVisible:false,alwaysTop:false},f||{});var e=new b(c,d);a.floatMgr.FOArray.push(e);if(!a.floatMgr.timer){a.floatMgr.adjustFO()}if(!a.floatMgr.registeredEvents){a(window).bind("resize",a.floatMgr.onChange);a(window).bind("scroll",a.floatMgr.onChange);a.floatMgr.registeredEvents=true}},adjustFO:function(){a.floatMgr.timer=null;var d=false;for(var c=0;c<a.floatMgr.FOArray.length;c++){FO=a.floatMgr.FOArray[c];if(FO.updateLocation()){d=true}}if(d){for(var c=0;c<a.floatMgr.FOArray.length;c++){FO=a.floatMgr.FOArray[c];FO.move()}if(!a.floatMgr.timer){a.floatMgr.timer=setTimeout(a.floatMgr.adjustFO,50)}}},stopFloatChk:false,onChange:function(){if(!a.floatMgr.timer&&!a.floatMgr.stopFloatChk){a.floatMgr.adjustFO()}}};a.fn.makeFloat=function(d){var c=this.eq(0);a.floatMgr.initializeFO(c,d);if(a.floatMgr.timer==null){a.floatMgr.adjustFO()}return c};a.fn.stopFloat=function(c){a.floatMgr.stopFloatChk=true};a.fn.restartFloat=function(c){a.floatMgr.stopFloatChk=false}})(jQuery);